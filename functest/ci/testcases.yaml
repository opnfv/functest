tiers:
    -
        name: healthcheck
        order: 0
        ci_loop: '(daily)|(weekly)'
        description : >-
            First tier to be executed to verify the basic
            operations in the VIM.
        testcases:
            -
                name: healthcheck
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    This test case verifies the basic OpenStack services like
                    Keystone, Glance, Cinder, Neutron and Nova.

                dependencies:
                    installer: ''
                    scenario: '^((?!lxd).)*$'
            -
                name: snaps_health_check
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    This test case creates executes the SimpleHealthCheck
                    Python test class which creates an, image, flavor, network,
                    and Cirros VM instance and observes the console output to
                    validate the single port obtains the correct IP address.

                dependencies:
                    installer: ''
                    scenario: '^((?!lxd).)*$'
                run:
                    module: 'functest.opnfv_tests.openstack.snaps.health_check'
                    class: 'HealthCheck'
            -
                name: connection_check
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    This test case verifies the retrieval of OpenStack clients:
                    Keystone, Glance, Neutron and Nova and may perform some
                    simple queries. When the config value of
                    snaps.use_keystone is True, functest must have access to
                    the cloud's private network.

                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.snaps.connection_check'
                    class: 'ConnectionCheck'

            -
                name: api_check
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    This test case verifies the retrieval of OpenStack clients:
                    Keystone, Glance, Neutron and Nova and may perform some
                    simple queries. When the config value of
                    snaps.use_keystone is True, functest must have access to
                    the cloud's private network.

                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.snaps.api_check'
                    class: 'ApiCheck'
    -
        name: smoke
        order: 1
        ci_loop: '(daily)|(weekly)'
        description : >-
            Set of basic Functional tests to validate the OPNFV scenarios.
        testcases:
            -
                name: vping_ssh
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    This test case verifies: 1) SSH to an instance using floating
                    IPs over the public network. 2) Connectivity between 2 instances
                    over a private network.
                dependencies:
                    installer: ''
                    scenario: '^((?!bgpvpn|odl_l3).)*$'
                run:
                    module: 'functest.opnfv_tests.openstack.vping.vping_ssh'
                    class: 'VPingSSH'

            -
                name: vping_userdata
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    This test case verifies:  1) Boot a VM with given userdata.
                    2) Connectivity between 2 instances over a private network.
                dependencies:
                    installer: ''
                    scenario: '^((?!lxd).)*$'
                run:
                    module: 'functest.opnfv_tests.openstack.vping.vping_userdata'
                    class: 'VPingUserdata'

            -
                name: tempest_smoke_serial
                criteria: 'success_rate == 100%'
                blocking: false
                description: >-
                    This test case runs the smoke subset of the OpenStack
                    Tempest suite. The list of test cases is generated by
                    Tempest automatically and depends on the parameters of
                    the OpenStack deplopyment.
                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.tempest.tempest'
                    class: 'TempestSmokeSerial'

            -
                name: rally_sanity
                criteria: 'success_rate == 100%'
                blocking: false
                description: >-
                    This test case runs a sub group of tests of the OpenStack
                    Rally suite in smoke mode.
                dependencies:
                    installer: ''
                    scenario: '^((?!bgpvpn).)*$'
                run:
                    module: 'functest.opnfv_tests.openstack.rally.rally'
                    class: 'RallySanity'

            -
                name: odl
                criteria: 'success_rate == 100%'
                blocking: true
                description: >-
                    Test Suite for the OpenDaylight SDN Controller. It
                    integrates some test suites from upstream using
                    Robot as the test framework.
                dependencies:
                    installer: ''
                    scenario: 'odl'
                run:
                    module: 'functest.opnfv_tests.sdn.odl.odl'
                    class: 'ODLTests'
                    args:
                        suites:
                            -  /home/opnfv/repos/odl_test/csit/suites/integration/basic
                            -  /home/opnfv/repos/odl_test/csit/suites/openstack/neutron

            -
                name: odl_netvirt
                criteria: 'success_rate == 100%'
                blocking: true
                description: >-
                    Test Suite for the OpenDaylight SDN Controller when
                    the NetVirt features are installed. It integrates
                    some test suites from upstream using Robot as the
                    test framework.
                dependencies:
                    installer: ''
                    scenario: 'netvirt'
                run:
                    module: 'functest.opnfv_tests.sdn.odl.odl'
                    class: 'ODLTests'
                    args:
                        suites:
                            -  /home/opnfv/repos/odl_test/csit/suites/integration/basic
                            -  /home/opnfv/repos/odl_test/csit/suites/openstack/neutron
                            -  /home/opnfv/repos/odl_test/csit/suites/openstack/connectivity

            -
                name: onos
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    Test Suite for the ONOS SDN Controller. It integrates
                    some test suites from upstream using TestON as the test
                    framework.
                dependencies:
                    installer: ''
                    scenario: 'onos'


            -
                name: snaps_smoke
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    This test case contains tests that setup and destroy
                    environments with VMs with and without Floating IPs
                    with a newly created user and project. Set the config
                    value snaps.use_floating_ips (True|False) to toggle
                    this functionality. When the config value of
                    snaps.use_keystone is True, functest must have access to
                    the cloud's private network.

                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.snaps.smoke'
                    class: 'SnapsSmoke'

    -
        name: features
        order: 2
        ci_loop: '(daily)|(weekly)'
        description : >-
            Test suites from feature projects
            integrated in functest
        testcases:
            -
                name: promise
                criteria: 'success_rate == 100%'
                blocking: false
                description: >-
                    Test suite from Promise project.
                dependencies:
                    installer: '(fuel)|(joid)'
                    scenario: ''
                run:
                     module: 'functest.opnfv_tests.features.promise'
                     class: 'Promise'

            -
                name: doctor
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Test suite from Doctor project.
                dependencies:
                    installer: '(apex)|(fuel)|(joid)'
                    scenario: '^((?!fdio).)*$'
                run:
                    module: 'functest.opnfv_tests.features.doctor'
                    class: 'Doctor'

            -
                name: bgpvpn
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Test suite from SDNVPN project.
                dependencies:
                    installer: '(fuel)|(apex)|(netvirt)'
                    scenario: 'bgpvpn'
                run:
                    module: 'functest.opnfv_tests.features.sdnvpn'
                    class: 'SdnVpnTests'

            -
                name: security_scan
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Simple Security Scan
                dependencies:
                    installer: 'apex'
                    scenario: '^((?!fdio).)*$'
                run:
                    module: 'functest.opnfv_tests.features.security_scan'
                    class: 'SecurityScan'
#            -
#                name: copper
#                criteria: 'status == "PASS"'
#                blocking: false
#                description: >-
#                    Test suite for policy management based on OpenStack Congress
#                dependencies:
#                    installer: '(apex)|(joid)'
#                    scenario: '^((?!fdio|lxd).)*$'
#                run:
#                    module: 'functest.opnfv_tests.features.copper'
#                    class: 'Copper'
            -
                name: multisite
                criteria: 'success_rate == 100%'
                blocking: false
                description: >-
                    Test suite from kingbird
                dependencies:
                    installer: '(fuel)|(compass)'
                    scenario: 'multisite'
                run:
                    module: 'functest.opnfv_tests.openstack.tempest.tempest'
                    class: 'TempestMultisite'
            -
                name: odl-sfc
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Test suite for odl-sfc to test two chains and two SFs
                dependencies:
                    installer: '(apex)|(fuel)'
                    scenario: 'odl_l2-sfc'
                run:
                    module: 'functest.opnfv_tests.features.odl_sfc'
                    class: 'OpenDaylightSFC'
            -
                name: onos_sfc
                criteria: 'status == "PASS"'
                blocking: true
                description: >-
                    Test Suite for onos-sfc to test sfc function.
                dependencies:
                    installer: ''
                    scenario: 'onos-sfc'
            -
                name: parser
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    Test suite from Parser project.
                dependencies:
                    installer: 'fuel'
                    scenario: '^((?!bgpvpn|noha).)*$'
                run:
                    module: 'functest.opnfv_tests.vnf.rnc.parser'
                    class: 'Parser'
            -
                name: orchestra
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    Test OpenBaton (Orchestra) stack
                dependencies:
                    installer: 'joid'
                    scenario: 'unknown'
                run:
                    module: 'functest.opnfv_tests.features.orchestrator.orchestra'
                    class: 'OpenbatonOrchestrator'
            -
                name: netready
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Test suite from Netready project.
                dependencies:
                    installer: 'apex'
                    scenario: 'gluon'
                run:
                     module: 'functest.opnfv_tests.features.netready'
                     class: 'GluonVping'
            -
                name: barometer
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    Test suite for the Barometer project. Separate tests verify the
                    proper configuration and functionality of the following
                    collectd plugins Ceilometer, Hugepages, Memory RAS (mcelog),
                    and OVS Events
                dependencies:
                    installer: 'fuel'
                    scenario: 'kvm_ovs_dpdk_bar'
                run:
                     module: 'functest.opnfv_tests.features.barometer'
                     class: 'BarometerCollectd'
    -
        name: components
        order: 3
        ci_loop: 'weekly'
        description : >-
            Extensive testing of OpenStack API.
        testcases:
            -
                name: tempest_full_parallel
                criteria: 'success_rate >= 80%'
                blocking: false
                description: >-
                    The list of test cases is generated by
                    Tempest automatically and depends on the parameters of
                    the OpenStack deplopyment.
                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.tempest.tempest'
                    class: 'TempestFullParallel'

            -
                name: rally_full
                criteria: 'success_rate >= 90%'
                blocking: false
                description: >-
                    This test case runs the full suite of scenarios of the OpenStack
                    Rally suite using several threads and iterations.
                dependencies:
                    installer: '^((?!netvirt).)*$'
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.openstack.rally.rally'
                    class: 'RallyFull'

    -
        name: vnf
        order: 4
        ci_loop: 'weekly'
        description : >-
            Collection of VNF test cases.
        testcases:
            -
                name: cloudify_ims
                criteria: 'status == "PASS"'
                blocking: false
                description: >-
                    This test case deploys an OpenSource vIMS solution from Clearwater
                    using the Cloudify orchestrator. It also runs some signaling traffic.
                dependencies:
                    installer: ''
                    scenario: '(ocl)|(nosdn)|^(os-odl)((?!bgpvpn).)*$'
                run:
                    module: 'functest.opnfv_tests.vnf.ims.cloudify_ims'
                    class: 'ImsVnf'
            -
                name: aaa
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    Test suite from Parser project.
                dependencies:
                    installer: ''
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.vnf.aaa.aaa'
                    class: 'AaaVnf'

            -
                name: juju_epc
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    Test suite from OAI project, vEPC deployed with Juju.
                dependencies:
                    installer: 'unknown'
                    scenario: 'unknown'
                run:
                    module: 'functest.opnfv_tests.vnf.epc.epc'
                    class: 'EpcVnf'

            -
                name: orchestra_ims
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    VNF deployment with OpenBaton (Orchestra)
                dependencies:
                    installer: ''
                    scenario: ''
                run:
                    module: 'functest.opnfv_tests.vnf.ims.orchestra_ims'
                    class: 'ImsVnf'

            -
                name: opera_ims
                criteria: 'ret == 0'
                blocking: false
                description: >-
                    Evolution of vIMS
                dependencies:
                    installer: 'unknown'
                    scenario: 'unknown'
                run:
                    module: 'functest.opnfv_tests.vnf.ims.opera_ims'
                    class: 'ImsVnf'
