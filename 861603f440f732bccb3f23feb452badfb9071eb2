{
  "comments": [
    {
      "key": {
        "uuid": "1a76adc5_68f194cc",
        "filename": "ci/check_os.sh",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 341
      },
      "writtenOn": "2016-08-22T08:58:14Z",
      "side": 1,
      "message": "It would be better to wrap this in a retry operation, like this one\n\nfunction fail {\n  echo $1 \u003e\u00262\n  exit 1\n}\n\nfunction retry {\n  local n\u003d1\n  local max\u003d5\n  local delay\u003d5\n  while true; do\n    \"$@\" \u0026\u0026 break || {\n      if [[ $n -lt $max ]]; then\n        ((n++))\n        echo \"Command failed. Attempt $n/$max:\"\n        sleep $delay;\n      else\n        fail \"The command has failed after $n attempts.\"\n      fi\n    }\n  done\n}",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 70,
        "endChar": 29
      },
      "revId": "861603f440f732bccb3f23feb452badfb9071eb2",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_575551c4",
        "filename": "ci/check_os.sh",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 770
      },
      "writtenOn": "2016-08-24T06:17:48Z",
      "side": 1,
      "message": "The problem is that not only here, any other place which attempt to call openstack api may be failed randomly, it\u0027s already happened like this, I suspect some setting is incorrect (too short for time out judge )",
      "parentUuid": "1a76adc5_68f194cc",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 70,
        "endChar": 29
      },
      "revId": "861603f440f732bccb3f23feb452badfb9071eb2",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_2196524d",
        "filename": "ci/check_os.sh",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 341
      },
      "writtenOn": "2016-08-25T07:06:40Z",
      "side": 1,
      "message": "This is why it is more important to make the retry function common and apply it across functest.",
      "parentUuid": "1a76adc5_575551c4",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 70,
        "endChar": 29
      },
      "revId": "861603f440f732bccb3f23feb452badfb9071eb2",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}